<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikTok - Get Coins</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            tiktok: {
              primary: '#000000',
              secondary: '#262626',
              accent: '#FE2C55', // TikTok红
              light: '#F7F7F7',
              gray: '#E5E5E5',
              'gray-dark': '#999999',
              'gray-light': '#F2F2F2',
              'coin-yellow': '#FFD700'
            },
            loading: {
              blue: '#165DFF'
            }
          },
          fontFamily: {
            sans: ['Inter', 'Helvetica', 'Arial', 'sans-serif']
          },
        }
      }
    }
  </script>
  
  <style>
    /* 基础样式 */
    body {
      font-family: 'Inter', Helvetica, Arial, sans-serif;
      background-color: #FAFAFA;
    }

    /* 自定义弹窗面板的滑入滑出效果 */
    #custom-coin-panel {
        transition: transform 0.3s ease-in-out;
    }
    
    /* 激活状态的充值按钮 */
    .recharge-button.active {
        background-color: #FE2C55; /* TikTok 红 */
        cursor: pointer;
    }
    
    /* 未激活状态的充值按钮 */
    .recharge-button {
        background-color: #fddde4; /* 浅粉色 */
        cursor: not-allowed;
    }
  </style>
</head>

<body class="text-tiktok-primary bg-[#FAFAFA] min-h-screen">

  <main class="container mx-auto px-4 py-6 max-w-md">
    <div class="bg-white rounded-xl p-4 md:p-6">
      <div class="flex-1 min-w-0">
        <div class="mb-4">
            <h2 class="text-xl font-bold text-black mb-1">Recharge</h2>
            <p class="text-sm text-tiktok-accent flex items-center">
                <span>Save around 25% with a lower third-party service fee.</span>
                <i class="fas fa-info-circle ml-2 text-gray-400"></i>
            </p>
        </div>
      
        <div>
            <div class="grid grid-cols-3 gap-3" id="coin-options-grid">
              <div class="coin-option bg-tiktok-accent/10 border-2 border-tiktok-accent rounded-lg p-4 cursor-pointer" data-price="0.29" data-coins="30">
                <div class="flex items-center justify-center mb-1 gap-1">
                  <span class="font-bold">30</span>
                </div>
                <p class="text-center text-sm font-medium">£0.29</p>
              </div>
              <div class="coin-option bg-white border border-gray-200 rounded-lg p-4 cursor-pointer" data-price="3.30" data-coins="350">
                <div class="flex items-center justify-center mb-1 gap-1">
                  <span class="font-bold">350</span>
                </div>
                <p class="text-center text-sm font-medium">£3.30</p>
              </div>
              <div class="coin-option bg-white border border-gray-200 rounded-lg p-4 cursor-pointer" data-price="6.59" data-coins="700">
                <div class="flex items-center justify-center mb-1 gap-1">
                  <span class="font-bold">700</span>
                </div>
                <p class="text-center text-sm font-medium">£6.59</p>
              </div>
              <div class="coin-option bg-white border border-gray-200 rounded-lg p-4 cursor-pointer" data-price="65.85" data-coins="7,000">
                <div class="flex items-center justify-center mb-1 gap-1">
                  <span class="font-bold">7,000</span>
                </div>
                <p class="text-center text-sm font-medium">£65.85</p>
              </div>
              <div class="coin-option bg-white border border-gray-200 rounded-lg p-4 cursor-pointer" data-price="164.55" data-coins="17,500">
                <div class="flex items-center justify-center mb-1 gap-1">
                  <span class="font-bold">17,500</span>
                </div>
                <p class="text-center text-sm font-medium">£164.55</p>
              </div>
              <div id="custom-btn" class="coin-option bg-white border border-gray-200 rounded-lg p-4 cursor-pointer" data-price="0" data-coins="Custom">
                <div class="flex flex-col items-center justify-center h-full">
                  <span class="font-bold text-base">Custom</span>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </main>
  
  <div id="custom-coin-modal" class="fixed inset-0 bg-black/60 z-50 hidden">
    <div id="custom-coin-panel" class="absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-4 transform translate-y-full">
        <div class="flex items-center justify-between mb-4">
            <button id="modal-back-btn" class="text-xl text-gray-600"><i class="fas fa-arrow-left"></i></button>
            <h3 class="text-lg font-bold">Custom</h3>
            <button class="text-xl text-gray-600"><i class="fas fa-question-circle"></i></button>
        </div>

        <div class="mb-4">
            <label class="text-sm font-medium text-gray-700 flex items-center mb-2">Number of Coins <i class="fas fa-chevron-down text-xs ml-1"></i></label>
            <div class="relative">
                <div class="absolute left-3 top-1/2 -translate-y-1/2 flex items-center">
                    <img src="https://s1.ax1x.com/2023/06/20/pCg9s0s.png" class="w-5 h-5" alt="Coin Icon">
                    <div id="cursor-line" class="w-0.5 h-5 bg-red-500 ml-1"></div>
                </div>
                <input type="text" id="custom-amount-input" readonly class="w-full bg-gray-100 rounded-lg py-3 pl-10 pr-4 text-gray-400 text-lg" placeholder="30 - 2,500,000">
            </div>
        </div>

        <div class="text-sm text-gray-500 mb-4 flex items-center">
            Recently picked
            <img src="https://s1.ax1x.com/2023/06/20/pCg9s0s.png" class="w-4 h-4 mx-1" alt="Coin Icon">
            <span>30</span>
        </div>

        <div id="keypad" class="grid grid-cols-4 gap-3 text-center mb-4">
            <button data-key="1" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">1</button>
            <button data-key="2" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">2</button>
            <button data-key="3" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">3</button>
            <button data-key="backspace" class="bg-gray-100 rounded-lg py-3 text-xl active:bg-gray-200"><i class="fas fa-backspace"></i></button>
            <button data-key="4" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">4</button>
            <button data-key="5" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">5</button>
            <button data-key="6" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">6</button>
            <button data-key="000" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">000</button>
            <button data-key="7" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">7</button>
            <button data-key="8" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">8</button>
            <button data-key="9" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">9</button>
            <button data-key="0" class="bg-gray-100 rounded-lg py-3 text-xl font-semibold active:bg-gray-200">0</button>
        </div>

        <div class="border-t pt-4">
             <div class="flex items-center justify-between text-sm mb-2 cursor-pointer">
                <p class="font-semibold text-gray-700">Special offer</p>
                <div class="flex items-center gap-2">
                    <p class="text-gray-500">Add to home screen to apply</p>
                    <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
                </div>
            </div>
            <div class="flex items-center justify-between font-bold text-lg mb-4">
                <span>Total</span>
                <span id="total-price">£0</span>
            </div>
            <button id="modal-recharge-btn" class="recharge-button w-full text-white font-bold py-3 rounded-full transition">
                <i class="fas fa-shield-alt mr-2"></i> Recharge
            </button>
        </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const customBtn = document.getElementById('custom-btn');
      const customCoinModal = document.getElementById('custom-coin-modal');
      const customCoinPanel = document.getElementById('custom-coin-panel');
      const modalBackBtn = document.getElementById('modal-back-btn');
      const keypad = document.getElementById('keypad');
      const amountInput = document.getElementById('custom-amount-input');
      const totalPriceEl = document.getElementById('total-price');
      const modalRechargeBtn = document.getElementById('modal-recharge-btn');

      // --- 弹窗显示/隐藏逻辑 ---
      function showModal() {
        customCoinModal.classList.remove('hidden');
        // 短暂延迟以触发CSS动画
        setTimeout(() => {
            customCoinPanel.classList.remove('translate-y-full');
        }, 10);
      }

      function hideModal() {
        customCoinPanel.classList.add('translate-y-full');
        setTimeout(() => {
            customCoinModal.classList.add('hidden');
            // 清空输入和重置按钮状态
            amountInput.value = '';
            updateState(); 
        }, 300); // 等待动画结束
      }

      customBtn.addEventListener('click', showModal);
      modalBackBtn.addEventListener('click', hideModal);
      customCoinModal.addEventListener('click', (e) => {
        // 如果点击的是背景遮罩，则关闭弹窗
        if (e.target === customCoinModal) {
            hideModal();
        }
      });


      // --- 键盘输入和状态更新逻辑 ---
      keypad.addEventListener('click', (e) => {
        const key = e.target.closest('button')?.dataset.key;
        if (!key) return;

        let currentValue = amountInput.value;

        if (key === 'backspace') {
            currentValue = currentValue.slice(0, -1);
        } else {
            currentValue += key;
        }
        
        // 限制最大长度
        if (currentValue.length > 7) {
            currentValue = currentValue.slice(0, 7);
        }

        amountInput.value = currentValue;
        updateState();
      });
      
      // --- 统一更新状态的函数 ---
      function updateState() {
          const value = amountInput.value;
          const amount = parseInt(value, 10);
          
          // 更新输入框样式
          if (value) {
              amountInput.classList.remove('text-gray-400');
              amountInput.classList.add('text-black', 'font-semibold');
          } else {
              amountInput.classList.remove('text-black', 'font-semibold');
              amountInput.classList.add('text-gray-400');
          }

          // 模拟价格计算 (每30金币约£0.29)
          const price = isNaN(amount) ? 0 : (amount / 30) * 0.29;
          totalPriceEl.textContent = `£${price.toFixed(2)}`;

          // 更新充值按钮状态
          if (!isNaN(amount) && amount >= 30 && amount <= 2500000) {
              modalRechargeBtn.classList.add('active');
              modalRechargeBtn.disabled = false;
          } else {
              modalRechargeBtn.classList.remove('active');
              modalRechargeBtn.disabled = true;
          }
      }
    });
  </script>
</body>
</html>
